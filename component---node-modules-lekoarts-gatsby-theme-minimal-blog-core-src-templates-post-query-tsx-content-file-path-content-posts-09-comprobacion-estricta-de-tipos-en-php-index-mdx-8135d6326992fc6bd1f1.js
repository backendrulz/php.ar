"use strict";(self.webpackChunkminimal_blog=self.webpackChunkminimal_blog||[]).push([[174],{5026:function(e,a,n){n.r(a),n.d(a,{Head:function(){return c.F},default:function(){return s}});var t=n(7294),r=n(1151);function l(e){const a=Object.assign({span:"span",p:"p",code:"code",pre:"pre",ul:"ul",li:"li",h1:"h1",strong:"strong"},(0,r.ah)(),e.components);return t.createElement(t.Fragment,null,t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 940px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 51.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3UlEQVR42oWS208TURCH948WE140XqI+2MQS0YBFsaQXqqH3Qq9camw1gHeDMcYHQQjdlna73Xa7l88522fTc/JlZs7O/M7MyWqbpX1iuTprqSKRZI7VRJYVZZP5uTwLKEhtKdBIiZa2kamQKR9w+O0n7U8/OPx4wvvj77SOv9Kex4cZR59PyFSabGSqaKvxLLXWEfz6DWdtvhhvOZ3qqOXLnrd8f5ZTa76T6XJoyy9fka8d4I4sbKOLbnTomUNs28GezmdiT/E8n3x1n+Xoa7TwWoLsdh3b8TDMCRcXPf6cXtI3TFzPkyKXqfN/lKhqMiMa4edJtEeRGOlSdXabMBWRqStCrosj1g3w8QTHmcXKV2cqT4kqwXSxRjiSUIJxEaxhSevWwGKij5hcCR0TczDi0uxzbuicD7t0RwM6Ev8d6nSGfcYDA3M0lkl8topV1LTakrSZLzdmD2y5MHDA8qDv4IxdDM/iyjHpOUM5tsUfcmbrDFwTGUu6doPafHmXpRcy8koszfpmlt1mi1J9j0K1QaFSF1unKLYkl21LsqK00wjiHeULhYp8q+3ReNNiPSX/bzyDFt0q83g9xa3QExbvPGTh5gMWbtzn2lzucV1yF++GuB16GmhE02X+Abi9sGgA+7o3AAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="Strict types banner"\n        title="Comprobación estricta de tipos en PHP"\n        src="/static/55ba032c7cfdca92c5877a0c86883b8d/999e6/strict-types-php.png"\n        srcset="/static/55ba032c7cfdca92c5877a0c86883b8d/5243c/strict-types-php.png 240w,\n/static/55ba032c7cfdca92c5877a0c86883b8d/ab158/strict-types-php.png 480w,\n/static/55ba032c7cfdca92c5877a0c86883b8d/999e6/strict-types-php.png 940w"\n        sizes="(max-width: 940px) 100vw, 940px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}}),"\n",t.createElement(a.p,null,"La comprobación estricta de tipos es una función que puedes habilitar en aplicaciones PHP para mejorar la seguridad de tipos. Veamos qué significa esto, los beneficios de utilizar tipos estrictos y cómo habilitarlo en tus aplicaciones."),"\n",t.createElement(a.p,null,"Para habilitar la comprobación estricta de tipos, agrega ",t.createElement(a.code,null,"declare(strict_types=1)")," al principio de tus archivos PHP. Esta declaración impone la tipificación estricta para los parámetros de función y los tipos de retorno de tu aplicación, de modo que si una función espera un parámetro o valor de retorno específico, PHP lanzará un error si se utiliza un tipo incorrecto."),"\n",t.createElement(a.p,null,"Aquí tienes un ejemplo sencillo que no utiliza ",t.createElement(a.code,null,"declare(strict_types=1)")," :"),"\n",t.createElement(a.pre,null,t.createElement(a.code,{className:"language-php"},"function add(int $a, int $b): int\n{\n    return $a + $b;\n}\n")),"\n",t.createElement(a.p,null,"Llamemos a esta función con argumentos de tipo cadena:"),"\n",t.createElement(a.pre,null,t.createElement(a.code,{className:"language-php"},"echo add('1', '2');\n\n// Salida:\n// 3\n")),"\n",t.createElement(a.p,null,"PHP convierte sin problemas los parámetros de cadena en enteros y devuelve el resultado ",t.createElement(a.code,null,"3"),"."),"\n",t.createElement(a.p,null,"En algunos casos, es posible que estés satisfecho con este comportamiento, como cuando deseas capturar la entrada del usuario en formato de cadena y no deseas intentar convertir los tipos primero. Pero esto también podría tener consecuencias no deseadas que causen errores en tu aplicación."),"\n",t.createElement(a.p,null,"Agreguemos ",t.createElement(a.code,null,"declare(strict_types=1);")," al principio del ejemplo:"),"\n",t.createElement(a.pre,null,t.createElement(a.code,{className:"language-php"},"declare(strict_types=1);\n\nfunction add(int $a, int $b): int\n{\n    return $a + $b;\n}\n")),"\n",t.createElement(a.p,null,"Ahora, si llamamos a la función ",t.createElement(a.code,null,"add")," con parámetros de tipo cadena, PHP lanzará un error:"),"\n",t.createElement(a.pre,null,t.createElement(a.code,{className:"language-php"},"echo add('1', '2');\n\n// Salida:\n// Fatal error: Uncaught TypeError: Argument 1 passed to add() must be of the type int, string given\n")),"\n",t.createElement(a.p,null,"PHP lanza un error porque la función ",t.createElement(a.code,null,"add")," esperaba que se pasaran enteros pero recibió cadenas en su lugar."),"\n",t.createElement(a.p,null,"Si la comprobación estricta de tipos está habilitada y tratamos de devolver un tipo de datos incorrecto desde el método, PHP también lanzará un error."),"\n",t.createElement(a.p,null,"Por ejemplo, supongamos que nuestra función ",t.createElement(a.code,null,"add")," ahora acepta números de punto flotante en lugar de enteros y que no tenemos habilitada la comprobación estricta de tipos:"),"\n",t.createElement(a.pre,null,t.createElement(a.code,{className:"language-php"},"function add(float $a, float $b): int\n{\n    return $a + $b;\n}\n")),"\n",t.createElement(a.p,null,"Podríamos llamar a la función de la siguiente manera:"),"\n",t.createElement(a.pre,null,t.createElement(a.code,{className:"language-php"},"echo add(1.25, 2.25);\n\n// Salida:\n// 3\n")),"\n",t.createElement(a.p,null,"¿Notaste el problema en la salida?"),"\n",t.createElement(a.p,null,"La respuesta que deberíamos haber recibido es ",t.createElement(a.code,null,"3.5")," . Sin embargo, debido a que hemos definido el tipo de retorno como ",t.createElement(a.code,null,"int")," , PHP convirtió el número de punto flotante en un entero y perdió precisión. Como puedes imaginar, esto podría causar problemas en otras partes de nuestra aplicación donde estamos utilizando este resultado y se podría haber necesitado precisión."),"\n",t.createElement(a.p,null,"Ahora corrijamos este problema utilizando ",t.createElement(a.code,null,"declare(strict_types=1)")," :"),"\n",t.createElement(a.pre,null,t.createElement(a.code,{className:"language-php"},"declare(strict_types=1);\n\nfunction add(float $a, float $b): int\n{\n    return $a + $b;\n}\n")),"\n",t.createElement(a.p,null,"Luego, podríamos llamar a la función de la siguiente manera:"),"\n",t.createElement(a.pre,null,t.createElement(a.code,{className:"language-php"},"echo add(1.25, 2.25);\n\n// Salida:\n// Fatal error: Uncaught TypeError: add(): Return value must be of type int, float returned\n")),"\n",t.createElement(a.p,null,"Como podemos ver, al habilitar la comprobación estricta de tipos se muestra que la función no está devolviendo el tipo de datos correcto. Esto es útil porque podría resaltar un posible error que no conocíamos. Luego podríamos tomar las medidas necesarias para:"),"\n",t.createElement(a.ul,null,"\n",t.createElement(a.li,null,"Actualizar los tipos de retorno si son incorrectos"),"\n",t.createElement(a.li,null,"Actualizar las indicaciones de tipo si son incorrectas"),"\n",t.createElement(a.li,null,"Actualizar el cuerpo de la función para devolver el tipo de datos correcto si es incorrecto"),"\n",t.createElement(a.li,null,"Corregir cualquier error en el código que llama a la función y que pueda estar pasando el tipo de datos incorrecto a la misma"),"\n"),"\n",t.createElement(a.h1,null,"¿Deberías utilizar tipos estrictos?"),"\n",t.createElement(a.p,null,"Creo que es una buena idea utilizar ",t.createElement(a.code,null,"declare(strict_types=1)")," en todos tus archivos PHP. Te brinda la confianza de que estás utilizando los tipos de datos correctos en tu código y puede ayudar a detectar errores, especialmente al agregarlo a bases de código más antiguas."),"\n",t.createElement(a.p,null,"Si estás utilizando un entorno de desarrollo integrado (IDE) como ",t.createElement(a.strong,null,"PhpStorm"),", puedes actualizar tus plantillas para que los nuevos archivos PHP creados dentro del IDE incluyan automáticamente ",t.createElement(a.code,null,"declare(strict_types=1)")," en la parte superior del archivo. Así no necesitarás recordar agregarlo manualmente."),"\n",t.createElement(a.p,null,"En ",t.createElement(a.strong,null,"PhpStorm"),", puedes actualizar tu plantilla para crear nuevas clases PHP de la siguiente manera:"),"\n",t.createElement(a.pre,null,t.createElement(a.code,{className:"language-php"},'<?php\ndeclare(strict_types=1);\n\n#parse("PHP File Header.php")\n\n#if (${NAMESPACE})\nnamespace ${NAMESPACE};\n\n#end\nclass ${NAME} {\n\n}\n')),"\n",t.createElement(a.p,null,"También puedes publicar las plantillas de archivos predeterminadas de Laravel para crear archivos PHP cuando ejecutes comandos Artisan como ",t.createElement(a.code,null,"php artisan make:controller")," . Al publicar las plantillas, puedes editarlas y agregar ",t.createElement(a.code,null,"declare(strict_types=1)")," en la parte superior. Esto significa que los archivos que crees utilizando comandos Artisan se crearán con una mayor seguridad de tipos ya habilitada."),"\n",t.createElement(a.p,null,"Por supuesto, si vas a agregar una comprobación estricta de tipos a tus archivos existentes, te recomiendo tener un conjunto de pruebas de buena calidad en su lugar primero. Es posible que tu código PHP haya estado permitiendo que se pasen tipos de datos incorrectos sin lanzar errores. Sin embargo, al habilitar la comprobación estricta de tipos, tu código será mucho menos tolerante y puede comenzar a lanzar errores. Esto podría hacer que tu aplicación se rompa de manera inesperada para tus usuarios."),"\n",t.createElement(a.p,null,"También puede que necesites refactorizar parte de tu código para que sea compatible con ",t.createElement(a.code,null,"declare(strict_types=1)")," . Sin embargo, no lo consideraría algo malo. En cambio, míralo como una oportunidad para mejorar la calidad de tu código."),"\n",t.createElement(a.p,null,"Para ayudarte a agregar ",t.createElement(a.code,null,"declare(strict_types=1)")," a tu código, puedes utilizar una herramienta como ",t.createElement(a.strong,null,"PHPStan")," que puede detectar estas incompatibilidades de tipos por ti."),"\n",t.createElement(a.p,null,"¡Espero que te haya gustado! Nos vemos en un próximo posteo..."))}var o=function(e){void 0===e&&(e={});const{wrapper:a}=Object.assign({},(0,r.ah)(),e.components);return a?t.createElement(a,e,t.createElement(l,e)):l(e)},c=n(8804);function s(e){return t.createElement(c.Z,e,t.createElement(o,e))}c.Z}}]);
//# sourceMappingURL=component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-09-comprobacion-estricta-de-tipos-en-php-index-mdx-8135d6326992fc6bd1f1.js.map