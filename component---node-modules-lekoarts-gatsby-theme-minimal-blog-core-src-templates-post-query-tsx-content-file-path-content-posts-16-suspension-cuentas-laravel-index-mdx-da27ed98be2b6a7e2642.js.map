{"version":3,"file":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-16-suspension-cuentas-laravel-index-mdx-da27ed98be2b6a7e2642.js","mappings":"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","sources":["webpack://minimal-blog/./content/posts/16-suspension-cuentas-laravel/index.mdx","webpack://minimal-blog/./node_modules/@lekoarts/gatsby-theme-minimal-blog-core/src/templates/post-query.tsx"],"sourcesContent":["/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    span: \"span\",\n    p: \"p\",\n    h2: \"h2\",\n    h3: \"h3\",\n    code: \"code\",\n    pre: \"pre\",\n    hr: \"hr\",\n    h4: \"h4\",\n    ul: \"ul\",\n    li: \"li\"\n  }, _provideComponents(), props.components);\n  return React.createElement(React.Fragment, null, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 900px; \\\"\\n    >\\n      <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACOElEQVR42mP4jwH+/fsHImEMVKk/QPLNo/1Pdgg+P1/OgEXz//9fvvx4dv/W/ZuXf/36hRD/C9L54c2dp7uVP21neHwyA13zr1+/H14/dH573q0dHuc3h37++BbqFrArvn5+/Wy/yac9DE8PWn35+IwB2U1A4tPHL49PT762SffuXo+zK+SeProF0fzrx9c3T47f2eP1eCPD7bWMDy/NAKpmwPTShYN9jzcxfNrP9ngDw7PLEyBSL67PfrmZ4c1O5tvrue9u4Hi0me3O0QKE5r9//wF99fvf/0cHfT7sZHi/j/37QYbnO6WePb528ebLynKf7wcY7m3kOruE/81u1nurGO5sM2WAuAoM/gLZZ0/te7iF5fsRhi97gErZ8zL11B0DFR0iFWwD980W+3+S4elmhisr+O8fy/7y9gYDPG5u3n1Q0tzvEp15c33o3eXyL8/FB0d7CJiEytqEKDhGiltFajh6Nldobl3o/en5PkjoM/z58+f7t6/rtuww8kkQ1nf1TC1b39Z+auWKRZsOy5gH6rpHqTtHaLpGuUZnl7ZOXrH5yP3HH95/+P7l80egboa/f/8+ffxo4eKlO3bu2rN3755du9YtWXjv/r1Vq9fG5ladO3d+5dqNW3fsOnb8xPWrVy6eP3f50vldO3fcunnrx48fDK/fvm+ZMLOsoXPBslULlq+eOmtBfnbB6vWb+qfNCUor3bxj95KVaw8cPHT2zNmjR4+dOXPm/Pnz+/cfuH379q9fvwBqzPJXxCS5wgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n  ></span>\\n  <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        alt=\\\"You are banned\\\"\\n        title=\\\"Estás suspendido\\\"\\n        src=\\\"/static/f27595671ae9810b548554d9f428de4f/7abe2/you-are-banned.png\\\"\\n        srcset=\\\"/static/f27595671ae9810b548554d9f428de4f/5243c/you-are-banned.png 240w,\\n/static/f27595671ae9810b548554d9f428de4f/ab158/you-are-banned.png 480w,\\n/static/f27595671ae9810b548554d9f428de4f/7abe2/you-are-banned.png 900w\\\"\\n        sizes=\\\"(max-width: 900px) 100vw, 900px\\\"\\n        style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n        loading=\\\"lazy\\\"\\n        decoding=\\\"async\\\"\\n      />\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"La suspensión de cuentas es una funcionalidad común en aplicaciones web que te permite restringir el acceso a los usuarios de forma permanente o temporal. Laravel ofrece herramientas flexibles para lograr esto utilizando campos en la base de datos, middleware y tareas programadas. En esta guía aprenderás cómo implementar ambos tipos de suspensiones.\"), \"\\n\", React.createElement(_components.h2, null, \"Suspensión Permanente\"), \"\\n\", React.createElement(_components.p, null, \"Un usuario suspendido permanentemente no podrá acceder a la aplicación hasta que sea reactivado manualmente.\"), \"\\n\", React.createElement(_components.h3, null, \"1. Agregar un Campo de Suspensión a la Tabla de Usuarios\"), \"\\n\", React.createElement(_components.p, null, \"Para registrar si un usuario está suspendido, agrega una columna llamada \", React.createElement(_components.code, null, \"banned_at\"), \" en la tabla \", React.createElement(_components.code, null, \"users\"), \":\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-php\"\n  }, \"Schema::table('users', function (Blueprint $table) {\\n    $table->timestamp('banned_at')->nullable();\\n});\\n\")), \"\\n\", React.createElement(_components.h3, null, \"2. Actualizar el Modelo de Usuario\"), \"\\n\", React.createElement(_components.p, null, \"Agrega un método en el modelo \", React.createElement(_components.code, null, \"User\"), \" para verificar si un usuario está suspendido:\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-php\"\n  }, \"class User extends Authenticatable\\n{\\n    // Determina si el usuario está suspendido\\n    public function isBanned(): bool\\n    {\\n        return !is_null($this->banned_at);\\n    }\\n}\\n\")), \"\\n\", React.createElement(_components.h3, null, \"3. Crear Middleware para Restringir Acceso a Usuarios Suspendidos\"), \"\\n\", React.createElement(_components.p, null, \"Este middleware bloqueará el acceso a cualquier usuario marcado como suspendido:\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-php\"\n  }, \"public function handle(Request $request, Closure $next)\\n{\\n    if (auth()->check() && auth()->user()->isBanned()) {\\n        abort(403, 'Tu cuenta ha sido suspendida.');\\n    }\\n\\n    return $next($request);\\n}\\n\")), \"\\n\", React.createElement(_components.h3, null, \"4. Métodos para Suspender y Reactivar Usuarios\"), \"\\n\", React.createElement(_components.p, null, \"Implementa funciones en un controlador para gestionar las suspensiones:\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-php\"\n  }, \"// Suspende un usuario permanentemente\\npublic function ban(User $user)\\n{\\n    $user->update([\\n        'banned_at' => now(),\\n    ]);\\n\\n    return response()->json(['message' => 'Usuario suspendido exitosamente.']);\\n}\\n\\n// Reactiva un usuario previamente suspendido\\npublic function unban(User $user)\\n{\\n    $user->update([\\n        'banned_at' => null,\\n    ]);\\n\\n    return response()->json(['message' => 'Usuario reactivado exitosamente.']);\\n}\\n\")), \"\\n\", React.createElement(_components.hr), \"\\n\", React.createElement(_components.h2, null, \"Suspensión Temporal\"), \"\\n\", React.createElement(_components.p, null, \"En este caso, los usuarios son suspendidos por un período específico y se reactivan automáticamente al finalizar ese tiempo.\"), \"\\n\", React.createElement(_components.h3, null, \"1. Modificar la Tabla de Usuarios\"), \"\\n\", React.createElement(_components.p, null, \"Agrega un campo llamado \", React.createElement(_components.code, null, \"banned_until\"), \" para almacenar la fecha de expiración de la suspensión:\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-php\"\n  }, \"Schema::table('users', function (Blueprint $table) {\\n    $table->timestamp('banned_until')->nullable();\\n});\\n\")), \"\\n\", React.createElement(_components.h3, null, \"2. Actualizar el Modelo de Usuario\"), \"\\n\", React.createElement(_components.p, null, \"Modifica el método \", React.createElement(_components.code, null, \"isBanned()\"), \" para comprobar si la suspensión sigue activa:\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-php\"\n  }, \"class User extends Authenticatable\\n{\\n    // Verifica si el usuario tiene una suspensión activa\\n    public function isBanned(): bool\\n    {\\n        return !is_null($this->banned_until) && now()->lessThan($this->banned_until);\\n    }\\n}\\n\")), \"\\n\", React.createElement(_components.h3, null, \"3. Middleware para Restringir Acceso a Usuarios Suspendidos Temporalmente\"), \"\\n\", React.createElement(_components.p, null, \"El middleware sigue siendo similar, pero ahora verifica el campo \", React.createElement(_components.code, null, \"banned_until\"), \":\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-php\"\n  }, \"public function handle(Request $request, Closure $next)\\n{\\n    if (auth()->check() && auth()->user()->isBanned()) {\\n        abort(403, 'Tu cuenta está suspendida temporalmente.');\\n    }\\n\\n    return $next($request);\\n}\\n\")), \"\\n\", React.createElement(_components.h3, null, \"4. Métodos para Suspender y Reactivar Usuarios Temporalmente\"), \"\\n\", React.createElement(_components.p, null, \"Establece una fecha futura para las suspensiones temporales:\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-php\"\n  }, \"// Suspende un usuario durante 5 días\\npublic function temporaryBan(User $user)\\n{\\n    $user->update([\\n        'banned_until' => now()->addDays(5),\\n    ]);\\n\\n    return response()->json(['message' => 'Usuario suspendido por 5 días.']);\\n}\\n\\n// Reactiva un usuario antes de tiempo\\npublic function liftBan(User $user)\\n{\\n    $user->update([\\n        'banned_until' => null,\\n    ]);\\n\\n    return response()->json(['message' => 'Suspensión levantada exitosamente.']);\\n}\\n\")), \"\\n\", React.createElement(_components.h3, null, \"5. Automatizar la Reactivación con Tareas Programadas\"), \"\\n\", React.createElement(_components.p, null, \"Crea un comando Artisan para eliminar las suspensiones caducadas y configúralo en el scheduler.\"), \"\\n\", React.createElement(_components.h4, null, \"Comando para Levantar Suspensiones Caducadas\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-php\"\n  }, \"namespace App\\\\Console\\\\Commands;\\n\\nuse App\\\\Models\\\\User;\\nuse Illuminate\\\\Console\\\\Command;\\nuse Illuminate\\\\Support\\\\Carbon;\\n\\nclass LiftExpiredBans extends Command\\n{\\n    protected $signature = 'ban:lift';\\n    protected $description = 'Levanta automáticamente las suspensiones caducadas';\\n\\n    public function handle()\\n    {\\n        User::whereNotNull('banned_until')\\n            ->where('banned_until', '<=', Carbon::now())\\n            ->update([\\n                'banned_until' => null,\\n            ]);\\n    }\\n}\\n\")), \"\\n\", React.createElement(_components.h4, null, \"Configuración del Scheduler\"), \"\\n\", React.createElement(_components.p, null, \"Programa el comando para ejecutarse cada hora añadiendo la siguiente línea en el archivo \", React.createElement(_components.code, null, \"app/Console/Kernel.php\"), \":\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-php\"\n  }, \"$schedule->command('ban:lift')->hourly();\\n\")), \"\\n\", React.createElement(_components.hr), \"\\n\", React.createElement(_components.h2, null, \"Conclusión\"), \"\\n\", React.createElement(_components.p, null, \"En esta guía aprendiste a implementar suspensiones permanentes y temporales en Laravel mediante:\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"Campos en la base de datos (\", React.createElement(_components.code, null, \"banned_at\"), \" o \", React.createElement(_components.code, null, \"banned_until\"), \").\"), \"\\n\", React.createElement(_components.li, null, \"Middleware para restringir el acceso a usuarios suspendidos.\"), \"\\n\", React.createElement(_components.li, null, \"Métodos en controladores para gestionar las suspensiones.\"), \"\\n\", React.createElement(_components.li, null, \"Un comando programado para levantar suspensiones automáticamente.\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Con estos pasos podrás gestionar eficazmente el acceso de los usuarios y asegurarte de cumplir con las políticas de tu aplicación.\"));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\n","import React from \"react\";\nimport GATSBY_COMPILED_MDX from \"/mnt/Datos/php.ar/blog/content/posts/16-suspension-cuentas-laravel/index.mdx\";\nimport PostComponent, {Head} from \"../components/post\";\nPostComponent\nexport default function GatsbyMDXWrapper(props) {\n  return React.createElement(PostComponent, props, React.createElement(GATSBY_COMPILED_MDX, props));\n}\nexport {Head};\nconst query = \"2040642971\";\n"],"names":["_createMdxContent","props","_components","Object","assign","span","p","h2","h3","code","pre","hr","h4","ul","li","_provideComponents","components","React","dangerouslySetInnerHTML","__html","className","wrapper","MDXLayout","GatsbyMDXWrapper","PostComponent","GATSBY_COMPILED_MDX"],"sourceRoot":""}