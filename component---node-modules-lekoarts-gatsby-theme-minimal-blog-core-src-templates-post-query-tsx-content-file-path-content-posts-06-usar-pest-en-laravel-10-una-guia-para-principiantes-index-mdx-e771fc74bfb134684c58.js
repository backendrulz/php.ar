"use strict";(self.webpackChunkminimal_blog=self.webpackChunkminimal_blog||[]).push([[258],{3901:function(e,a,n){n.r(a),n.d(a,{Head:function(){return o.F},default:function(){return u}});var t=n(7294),l=n(1151);function r(e){const a=Object.assign({span:"span",p:"p",strong:"strong",h2:"h2",ul:"ul",li:"li",pre:"pre",code:"code"},(0,l.ah)(),e.components);return t.createElement(t.Fragment,null,t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 43.75%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABcElEQVR42qWSS0vDQBSF8zu0dFGbJpk8Ok1N06R5mTYtiC8UFRGkqy7qrhsR3ehKEQRfBRc+NuKPFOfIJG3VRVFx8XFncfPN4UwE022BlEMm6z7+Qfq9Vll4F2xvmelmjBJpoKR635C0P8FUGkEgRgCV+oxQH5oZQq+GoxlBMYJ0+TcJ+Z5KIybUnEXYUQfVRhtOlMAOElheC/WozauYCH8Sj4QQROJCr6/A9NZBawkIjaEYPpRyAEKDScqxkBhhiqIHkzNH1vxMyJf0WgfUXUXZXUPFXYIdtOA2O7C8BLzfsayoupgRKXKSiTyxkJOrmJUqyMkm5lSHP0om5IVmKRpZGvULmp+mKZA6mu4m7vsvON25xPn2NU42LnDXfcTt3gPbinuQDI8Jn7Lp8EsLRQutbg+DwysMzobYvxniYPiM46dX7PaPUNZiRmgIgRfP/8PRnIrKpx0jr8xDrIdQ4jbkOEHRCSFaPpN0D0Y1fvsAIWQpeU+vNYoAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="Pest banner"\n        title="Pest banner"\n        src="/static/a3610e1d9eac42aae1d5efa6f3d77065/7d769/pest-banner.png"\n        srcset="/static/a3610e1d9eac42aae1d5efa6f3d77065/5243c/pest-banner.png 240w,\n/static/a3610e1d9eac42aae1d5efa6f3d77065/ab158/pest-banner.png 480w,\n/static/a3610e1d9eac42aae1d5efa6f3d77065/7d769/pest-banner.png 960w,\n/static/a3610e1d9eac42aae1d5efa6f3d77065/5ece7/pest-banner.png 1200w"\n        sizes="(max-width: 960px) 100vw, 960px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}}),"\n",t.createElement(a.p,null,t.createElement(a.strong,null,"Pest")," es un ",t.createElement(a.strong,null,"framework de pruebas")," para PHP que ofrece una sintaxis elegante y expresiva para escribir ",t.createElement(a.strong,null,"pruebas unitarias")," y de ",t.createElement(a.strong,null,"integración"),". Pest se integra perfectamente con Laravel, el popular framework de desarrollo web basado en PHP, y ofrece varias ventajas sobre otros frameworks de pruebas como ",t.createElement(a.strong,null,"PHPUnit")," o ",t.createElement(a.strong,null,"Codeception"),"."),"\n",t.createElement(a.p,null,"En esta publicación de blog, te enseñaré cómo usar Pest en Laravel 10, desde la instalación y configuración hasta algunos ejemplos de uso. Al final de este artículo, podrás escribir pruebas más legibles, concisas y divertidas con Pest y Laravel."),"\n",t.createElement(a.h2,null,"¿Qué es Pest y por qué usarlo?"),"\n",t.createElement(a.p,null,"Pest es un framework de pruebas creado por Nuno Maduro, un desarrollador portugués que trabaja en Laravel.\nPest se inspira en otros frameworks de pruebas como ",t.createElement(a.strong,null,"Jest")," (para ",t.createElement(a.strong,null,"JavaScript"),") o ",t.createElement(a.strong,null,"RSpec")," (para ",t.createElement(a.strong,null,"Ruby"),"), y ofrece una sintaxis similar a la de estos."),"\n",t.createElement(a.p,null,"Pest se basa en ",t.createElement(a.strong,null,"PHPUnit"),", el framework de pruebas más usado en PHP, pero lo mejora con las siguientes características:"),"\n",t.createElement(a.ul,null,"\n",t.createElement(a.li,null,"Una sintaxis fluida y expresiva que permite escribir pruebas con menos código y más claridad."),"\n",t.createElement(a.li,null,"Un sistema de plugins que permite extender la funcionalidad de Pest con características adicionales, como soporte para snapshots, mocks, paralelización, cobertura de código, etc."),"\n",t.createElement(a.li,null,"Una integración nativa con Laravel que permite usar las funciones y helpers del framework sin necesidad de configurar nada adicional."),"\n",t.createElement(a.li,null,"Un reporte de errores más amigable y detallado que el de PHPUnit, que facilita la depuración y el análisis de las pruebas."),"\n"),"\n",t.createElement(a.h2,null,"Cómo instalar Pest en Laravel 10"),"\n",t.createElement(a.p,null,"Para instalar Pest en Laravel 10, solo necesitas ejecutar el siguiente comando en la terminal:"),"\n",t.createElement(a.pre,null,t.createElement(a.code,{className:"language-bash"},"composer require pestphp/pest --dev\n")),"\n",t.createElement(a.p,null,"Este comando instalará Pest como una dependencia de desarrollo en tu proyecto Laravel. También creará un archivo ",t.createElement(a.code,null,"pest.php")," en la carpeta ",t.createElement(a.code,null,"tests"),", donde podrás configurar las opciones de Pest."),"\n",t.createElement(a.p,null,"Además, si quieres usar los plugins de Pest, puedes instalarlos con el comando ",t.createElement(a.code,null,"pest:install"),", seguido del nombre del plugin. Por ejemplo, para instalar el plugin de Laravel, puedes ejecutar:"),"\n",t.createElement(a.pre,null,t.createElement(a.code,{className:"language-bash"},"php artisan pest:install laravel\n")),"\n",t.createElement(a.p,null,"Este comando instalará el plugin y creará un archivo ",t.createElement(a.code,null,"Pest.php")," en la carpeta ",t.createElement(a.code,null,"tests"),", donde podrás registrar los helpers y funciones globales de Laravel para usarlos en tus pruebas."),"\n",t.createElement(a.h2,null,"Cómo escribir pruebas con Pest"),"\n",t.createElement(a.p,null,"Para escribir pruebas con Pest, puedes usar la función ",t.createElement(a.code,null,"test"),", que recibe dos argumentos: el nombre de la prueba y una función anónima que contiene las afirmaciones o assertions. Por ejemplo:"),"\n",t.createElement(a.pre,null,t.createElement(a.code,{className:"language-php"},"test('la suma de dos números es igual a su resultado', function () {\n    expect(1 + 2)->toBe(3);\n});\n")),"\n",t.createElement(a.p,null,"En este ejemplo, usamos la función ",t.createElement(a.code,null,"expect")," para crear una expectativa sobre el valor que queremos probar. Luego, usamos el método ",t.createElement(a.code,null,"toBe")," para comparar ese valor con el resultado esperado. Si la comparación es verdadera, la prueba pasa; si no, falla."),"\n",t.createElement(a.p,null,"Pest ofrece varios métodos para hacer diferentes tipos de comparaciones, como ",t.createElement(a.code,null,"toEqual"),", ",t.createElement(a.code,null,"toBeTrue"),", ",t.createElement(a.code,null,"toBeFalse"),", ",t.createElement(a.code,null,"toContain"),", ",t.createElement(a.code,null,"toHaveKey"),", etc. Puedes consultar la documentación oficial de Pest para ver todos los métodos disponibles."),"\n",t.createElement(a.p,null,"Además, puedes agrupar varias pruebas relacionadas en un grupo o suite usando la función ",t.createElement(a.code,null,"it"),". Por ejemplo:"),"\n",t.createElement(a.pre,null,t.createElement(a.code,{className:"language-php"},"it('suma dos números', function () {\n    expect(1 + 2)->toBe(3);\n});\n\nit('resta dos números', function () {\n    expect(2 - 1)->toBe(1);\n});\n")),"\n",t.createElement(a.p,null,"En este caso, las dos pruebas pertenecen al mismo grupo y se ejecutan juntas. Puedes usar tantos grupos como quieras para organizar tus pruebas."),"\n",t.createElement(a.h2,null,"Cómo escribir pruebas para Laravel con Pest"),"\n",t.createElement(a.p,null,"Pest se integra perfectamente con Laravel y te permite usar las funciones y helpers del framework en tus pruebas. Por ejemplo, puedes usar la función ",t.createElement(a.code,null,"get")," para hacer una petición HTTP a una ruta de tu aplicación y luego usar los métodos ",t.createElement(a.code,null,"assertOk"),", ",t.createElement(a.code,null,"assertStatus"),", ",t.createElement(a.code,null,"assertJson"),", etc. para verificar la respuesta de la ruta. Por ejemplo:"),"\n",t.createElement(a.pre,null,t.createElement(a.code,{className:"language-php"},"test('la ruta / devuelve una vista de bienvenida', function () {\n    $response = get('/');\n\n    $response->assertOk();\n    $response->assertViewIs('welcome');\n});\n")),"\n",t.createElement(a.p,null,"En este ejemplo, hacemos una petición GET a la ruta ",t.createElement(a.code,null,"/")," y luego verificamos que la respuesta sea exitosa y que devuelva la vista ",t.createElement(a.code,null,"welcome"),"."),"\n",t.createElement(a.p,null,"También puedes usar la función ",t.createElement(a.code,null,"post")," para hacer una petición POST a una ruta y enviar datos. Por ejemplo:"),"\n",t.createElement(a.pre,null,t.createElement(a.code,{className:"language-php"},"test('la ruta /login autentica a un usuario', function () {\n    $user = User::factory()->create();\n\n    $response = post('/login', [\n        'email' => $user->email,\n        'password' => 'password',\n    ]);\n\n    $response->assertRedirect('/home');\n    expect(auth()->user())->toBe($user);\n});\n")),"\n",t.createElement(a.p,null,"En este ejemplo, creamos un usuario con el helper ",t.createElement(a.code,null,"User::factory()")," y luego hacemos una petición POST a la ruta ",t.createElement(a.code,null,"/login")," con sus credenciales. Luego, verificamos que la respuesta sea una redirección a la ruta ",t.createElement(a.code,null,"/home")," y que el usuario esté autenticado."),"\n",t.createElement(a.p,null,"Pest también te permite usar los helpers ",t.createElement(a.code,null,"artisan"),", ",t.createElement(a.code,null,"database"),", ",t.createElement(a.code,null,"event"),", ",t.createElement(a.code,null,"mail"),", ",t.createElement(a.code,null,"queue"),", etc. para interactuar con los componentes de Laravel en tus pruebas. Por ejemplo:"),"\n",t.createElement(a.pre,null,t.createElement(a.code,{className:"language-php"},"test('la ruta /register crea un nuevo usuario', function () {\n    $response = post('/register', [\n        'name' => 'John Doe',\n        'email' => 'john@example.com',\n        'password' => 'password',\n        'password_confirmation' => 'password',\n    ]);\n\n    $response->assertRedirect('/home');\n    expect(User::count())->toBe(1);\n    expect(User::first()->name)->toBe('John Doe');\n    expect(User::first()->email)->toBe('john@example.com');\n    expect(User::first()->email_verified_at)->not()->toBeNull();\n    mail()->assertSent(VerifyEmail::class);\n});\n")),"\n",t.createElement(a.p,null,"En este ejemplo, hacemos una petición POST a la ruta ",t.createElement(a.code,null,"/register")," con los datos de un nuevo usuario y luego verificamos que se haya creado el usuario en la base de datos, que tenga sus datos correctos, que haya verificado su email y que se haya enviado un correo de verificación."),"\n",t.createElement(a.h2,null,"Cómo usar plugins de Pest"),"\n",t.createElement(a.p,null,"Pest tiene un sistema de plugins que te permite extender su funcionalidad con características adicionales. Algunos de los plugins más populares son:"),"\n",t.createElement(a.ul,null,"\n",t.createElement(a.li,null,t.createElement(a.strong,null,"Pest Plugin Laravel"),": Te permite usar las funciones y helpers de Laravel en tus pruebas."),"\n",t.createElement(a.li,null,t.createElement(a.strong,null,"Pest Plugin Livewire"),": Te permite escribir pruebas para tus componentes Livewire."),"\n",t.createElement(a.li,null,t.createElement(a.strong,null,"Pest Plugin Parallel"),": Te permite ejecutar tus pruebas en paralelo para reducir el tiempo de ejecución."),"\n",t.createElement(a.li,null,t.createElement(a.strong,null,"Pest Plugin Coverage"),": Te permite generar un reporte de cobertura de código para tus pruebas."),"\n",t.createElement(a.li,null,t.createElement(a.strong,null,"Pest Plugin Expectations"),": Te permite usar más métodos de expectativa en tus pruebas."),"\n",t.createElement(a.li,null,t.createElement(a.strong,null,"Pest Plugin Faker"),": Te permite usar el generador de datos falsos Faker en tus pruebas."),"\n",t.createElement(a.li,null,t.createElement(a.strong,null,"Pest Plugin Init"),": Te permite inicializar un proyecto Pest desde cero."),"\n",t.createElement(a.li,null,t.createElement(a.strong,null,"Pest Plugin Mockery"),": Te permite usar el framework de mocking Mockery en tus pruebas."),"\n",t.createElement(a.li,null,t.createElement(a.strong,null,"Pest Plugin Snapshot"),": Te permite usar snapshots para comparar el resultado de tus pruebas con una versión anterior."),"\n"),"\n",t.createElement(a.p,null,"Para usar un plugin de Pest, solo tienes que instalarlo con Composer y luego ejecutar el comando ",t.createElement(a.code,null,"pest:install")," seguido del nombre del plugin. Por ejemplo, para instalar el plugin de Livewire, puedes ejecutar:"),"\n",t.createElement(a.pre,null,t.createElement(a.code,{className:"language-bash"},"composer require pestphp/pest-plugin-livewire --dev\nphp artisan pest:install livewire\n")),"\n",t.createElement(a.p,null,"Este comando instalará el plugin y creará un archivo ",t.createElement(a.code,null,"Livewire.php")," en la carpeta ",t.createElement(a.code,null,"tests"),", donde podrás registrar los helpers y funciones globales de Livewire para usarlos en tus pruebas."),"\n",t.createElement(a.h2,null,"Cómo ejecutar y depurar pruebas con Pest"),"\n",t.createElement(a.p,null,"Para ejecutar tus pruebas con Pest, solo tienes que ejecutar el comando ",t.createElement(a.code,null,"pest")," en la terminal. Este comando ejecutará todas las pruebas que encuentre en la carpeta ",t.createElement(a.code,null,"tests"),"."),"\n",t.createElement(a.p,null,"Si quieres ejecutar solo una prueba o un grupo de pruebas, puedes pasar el nombre o el archivo como argumento. Por ejemplo:"),"\n",t.createElement(a.pre,null,t.createElement(a.code,{className:"language-bash"},"pest tests/Feature/LoginTest.php\npest --group=auth\n")),"\n",t.createElement(a.p,null,"Estos comandos ejecutarán solo la prueba ",t.createElement(a.code,null,"LoginTest.php")," o las pruebas que pertenezcan al grupo ",t.createElement(a.code,null,"auth"),"."),"\n",t.createElement(a.p,null,"Pest también te ofrece varias opciones para depurar y analizar tus pruebas. Por ejemplo:"),"\n",t.createElement(a.ul,null,"\n",t.createElement(a.li,null,"Puedes usar la opción ",t.createElement(a.code,null,"--coverage")," para generar un reporte de cobertura de código para tus pruebas. Necesitas tener instalado el plugin de coverage para usar esta opción."),"\n",t.createElement(a.li,null,"Puedes usar la opción ",t.createElement(a.code,null,"--watch")," para ejecutar tus pruebas cada vez que cambies un archivo de tu proyecto. Necesitas tener instalado el plugin de watch para usar esta opción."),"\n",t.createElement(a.li,null,"Puedes usar la opción ",t.createElement(a.code,null,"--filter")," para ejecutar solo las pruebas que coincidan con un patrón. Por ejemplo: ",t.createElement(a.code,null,"pest --filter=suma"),"."),"\n",t.createElement(a.li,null,"Puedes usar la opción ",t.createElement(a.code,null,"--stop-on-failure")," para detener la ejecución de las pruebas cuando una falle."),"\n",t.createElement(a.li,null,"Puedes usar la opción ",t.createElement(a.code,null,"--verbose")," para mostrar más información sobre las pruebas y los errores."),"\n"),"\n",t.createElement(a.p,null,"Puedes consultar la documentación oficial de Pest para ver todas las opciones disponibles."),"\n",t.createElement(a.h2,null,"Conclusión"),"\n",t.createElement(a.p,null,"En este artículo, te he mostrado cómo ",t.createElement(a.strong,null,"usar Pest en Laravel 10"),", desde la instalación y configuración hasta algunos ejemplos de uso. Espero que te haya gustado y que te animes a probar este framework de pruebas tan elegante y expresivo."),"\n",t.createElement(a.p,null,"Pest te ofrece una sintaxis fluida y concisa para escribir pruebas unitarias y de integración, una integración nativa con Laravel y sus componentes, un sistema de plugins para extender su funcionalidad y un reporte de errores más amigable y detallado."),"\n",t.createElement(a.p,null,"Si quieres aprender más sobre Pest, te recomiendo que visites su sitio web oficial, donde encontrarás una guía completa, una referencia de los métodos disponibles y una lista de los plugins existentes."),"\n",t.createElement(a.p,null,"También puedes seguir a Nuno Maduro en Twitter (@enunomaduro), donde comparte consejos y novedades sobre Pest y Laravel."),"\n",t.createElement(a.p,null,"Gracias por leer este artículo y ¡Hasta la próxima!."))}var s=function(e){void 0===e&&(e={});const{wrapper:a}=Object.assign({},(0,l.ah)(),e.components);return a?t.createElement(a,e,t.createElement(r,e)):r(e)},o=n(8804);function u(e){return t.createElement(o.Z,e,t.createElement(s,e))}o.Z}}]);
//# sourceMappingURL=component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-06-usar-pest-en-laravel-10-una-guia-para-principiantes-index-mdx-e771fc74bfb134684c58.js.map